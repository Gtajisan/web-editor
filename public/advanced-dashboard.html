<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>P2A-Bot v2 - Advanced Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
        }
        
        header {
            background: white;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #667eea;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .status-bar {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .status-item {
            background: #f0f2f5;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        
        .status-item h3 {
            font-size: 14px;
            color: #666;
            margin-bottom: 5px;
        }
        
        .status-item .value {
            font-size: 20px;
            font-weight: bold;
            color: #667eea;
        }
        
        .tabs {
            display: flex;
            gap: 10px;
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .tab-button {
            padding: 10px 20px;
            border: none;
            background: #f0f2f5;
            cursor: pointer;
            border-radius: 5px;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .tab-button.active {
            background: #667eea;
            color: white;
        }
        
        .tab-button:hover {
            background: #667eea;
            color: white;
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.3s;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .card h2 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 18px;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }
        
        .chart-container {
            position: relative;
            height: 300px;
        }
        
        .table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }
        
        .table th {
            background: #f0f2f5;
            padding: 10px;
            text-align: left;
            font-weight: 600;
        }
        
        .table td {
            padding: 10px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .table tr:hover {
            background: #f9f9f9;
        }
        
        .console {
            background: #1e1e1e;
            color: #00ff00;
            font-family: 'Courier New', monospace;
            padding: 15px;
            border-radius: 8px;
            height: 400px;
            overflow-y: auto;
            font-size: 12px;
        }
        
        .console-line {
            margin: 3px 0;
            line-height: 1.4;
        }
        
        .log-info { color: #00ff00; }
        .log-warn { color: #ffaa00; }
        .log-error { color: #ff4444; }
        .log-debug { color: #00aaff; }
        
        .command-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 10px;
        }
        
        .command-item {
            background: #f0f2f5;
            padding: 12px;
            border-radius: 6px;
            border-left: 3px solid #667eea;
        }
        
        .command-item .cmd {
            font-weight: bold;
            color: #667eea;
            font-family: monospace;
        }
        
        .command-item .desc {
            font-size: 12px;
            color: #666;
            margin-top: 3px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }
        
        .stat-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }
        
        .stat-box .number {
            font-size: 28px;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .stat-box .label {
            font-size: 12px;
            opacity: 0.9;
        }
        
        .refresh-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 500;
            transition: background 0.3s;
        }
        
        .refresh-btn:hover {
            background: #764ba2;
        }
        
        .loading {
            text-align: center;
            padding: 20px;
            color: #666;
        }
        
        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .badge-success {
            background: #d4edda;
            color: #155724;
        }
        
        .badge-warning {
            background: #fff3cd;
            color: #856404;
        }
        
        .badge-danger {
            background: #f8d7da;
            color: #721c24;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üêê P2A-Bot v2 - Advanced Dashboard</h1>
            <p style="color: #666; margin-top: 5px;">Real-time monitoring and control panel</p>
            <div class="status-bar">
                <div class="status-item">
                    <h3>Bot Status</h3>
                    <div class="value"><span class="badge badge-success">üü¢ ONLINE</span></div>
                </div>
                <div class="status-item">
                    <h3>Database</h3>
                    <div class="value" id="db-status">Loading...</div>
                </div>
                <div class="status-item">
                    <h3>Active Chats</h3>
                    <div class="value" id="active-chats">0</div>
                </div>
                <div class="status-item">
                    <h3>Total Commands</h3>
                    <div class="value">23</div>
                </div>
            </div>
        </header>
        
        <div class="tabs">
            <button class="tab-button active" onclick="switchTab('overview')">üìä Overview</button>
            <button class="tab-button" onclick="switchTab('stats')">üìà Statistics</button>
            <button class="tab-button" onclick="switchTab('commands')">‚ö° Commands</button>
            <button class="tab-button" onclick="switchTab('database')">üíæ Database</button>
            <button class="tab-button" onclick="switchTab('console')">üñ•Ô∏è Console</button>
            <button class="tab-button" onclick="switchTab('settings')">‚öôÔ∏è Settings</button>
        </div>
        
        <!-- Overview Tab -->
        <div id="overview" class="tab-content active">
            <div class="grid">
                <div class="card">
                    <h2>üìä Command Usage</h2>
                    <div class="chart-container">
                        <canvas id="commandChart"></canvas>
                    </div>
                </div>
                <div class="card">
                    <h2>üë• User Activity</h2>
                    <div class="chart-container">
                        <canvas id="activityChart"></canvas>
                    </div>
                </div>
            </div>
            <div class="card">
                <h2>üöÄ System Status</h2>
                <div class="stats-grid">
                    <div class="stat-box">
                        <div class="label">Uptime</div>
                        <div class="number" id="uptime">42h</div>
                    </div>
                    <div class="stat-box">
                        <div class="label">Messages</div>
                        <div class="number" id="messages">1.2K</div>
                    </div>
                    <div class="stat-box">
                        <div class="label">Users Warned</div>
                        <div class="number" id="warned">8</div>
                    </div>
                    <div class="stat-box">
                        <div class="label">Users Banned</div>
                        <div class="number" id="banned">3</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Statistics Tab -->
        <div id="stats" class="tab-content">
            <div class="grid">
                <div class="card">
                    <h2>üìä Daily Statistics</h2>
                    <div class="chart-container">
                        <canvas id="dailyChart"></canvas>
                    </div>
                </div>
                <div class="card">
                    <h2>üìà Weekly Trends</h2>
                    <div class="chart-container">
                        <canvas id="weeklyChart"></canvas>
                    </div>
                </div>
            </div>
            <div class="card">
                <h2>üìã Top Commands</h2>
                <table class="table">
                    <thead>
                        <tr>
                            <th>Command</th>
                            <th>Usage Count</th>
                            <th>Success Rate</th>
                            <th>Avg Time</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>/help</td>
                            <td>234</td>
                            <td><span class="badge badge-success">100%</span></td>
                            <td>45ms</td>
                        </tr>
                        <tr>
                            <td>/stats</td>
                            <td>189</td>
                            <td><span class="badge badge-success">100%</span></td>
                            <td>32ms</td>
                        </tr>
                        <tr>
                            <td>/warn</td>
                            <td>124</td>
                            <td><span class="badge badge-success">98%</span></td>
                            <td>78ms</td>
                        </tr>
                        <tr>
                            <td>/ban</td>
                            <td>45</td>
                            <td><span class="badge badge-success">96%</span></td>
                            <td>156ms</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Commands Tab -->
        <div id="commands" class="tab-content">
            <div class="card">
                <h2>‚ö° All 23 Commands</h2>
                <div class="command-list">
                    <div class="command-item">
                        <div class="cmd">/start</div>
                        <div class="desc">Welcome message</div>
                    </div>
                    <div class="command-item">
                        <div class="cmd">/help</div>
                        <div class="desc">Show all commands</div>
                    </div>
                    <div class="command-item">
                        <div class="cmd">/ban</div>
                        <div class="desc">Ban user</div>
                    </div>
                    <div class="command-item">
                        <div class="cmd">/unban</div>
                        <div class="desc">Unban user</div>
                    </div>
                    <div class="command-item">
                        <div class="cmd">/kick</div>
                        <div class="desc">Kick user</div>
                    </div>
                    <div class="command-item">
                        <div class="cmd">/warn</div>
                        <div class="desc">Warn user</div>
                    </div>
                    <div class="command-item">
                        <div class="cmd">/mute</div>
                        <div class="desc">Mute user</div>
                    </div>
                    <div class="command-item">
                        <div class="cmd">/unmute</div>
                        <div class="desc">Unmute user</div>
                    </div>
                    <div class="command-item">
                        <div class="cmd">/pin</div>
                        <div class="desc">Pin message</div>
                    </div>
                    <div class="command-item">
                        <div class="cmd">/unpin</div>
                        <div class="desc">Unpin message</div>
                    </div>
                    <div class="command-item">
                        <div class="cmd">/purge</div>
                        <div class="desc">Delete messages</div>
                    </div>
                    <div class="command-item">
                        <div class="cmd">/note</div>
                        <div class="desc">Note management</div>
                    </div>
                    <div class="command-item">
                        <div class="cmd">/filter</div>
                        <div class="desc">Content filters</div>
                    </div>
                    <div class="command-item">
                        <div class="cmd">/stats</div>
                        <div class="desc">Show statistics</div>
                    </div>
                    <div class="command-item">
                        <div class="cmd">/userinfo</div>
                        <div class="desc">User details</div>
                    </div>
                    <div class="command-item">
                        <div class="cmd">/chatinfo</div>
                        <div class="desc">Chat info</div>
                    </div>
                    <div class="command-item">
                        <div class="cmd">/adminlist</div>
                        <div class="desc">Show admins</div>
                    </div>
                    <div class="command-item">
                        <div class="cmd">/report</div>
                        <div class="desc">Report user</div>
                    </div>
                    <div class="command-item">
                        <div class="cmd">/welcome</div>
                        <div class="desc">Set welcome msg</div>
                    </div>
                    <div class="command-item">
                        <div class="cmd">/antiflood</div>
                        <div class="desc">Anti-spam toggle</div>
                    </div>
                    <div class="command-item">
                        <div class="cmd">/settings</div>
                        <div class="desc">Bot settings</div>
                    </div>
                    <div class="command-item">
                        <div class="cmd">/logs</div>
                        <div class="desc">Recent logs</div>
                    </div>
                    <div class="command-item">
                        <div class="cmd">/info</div>
                        <div class="desc">Bot information</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Database Tab -->
        <div id="database" class="tab-content">
            <div class="card">
                <h2>üíæ Database Status</h2>
                <button class="refresh-btn" onclick="refreshDatabase()">üîÑ Refresh</button>
                <table class="table" style="margin-top: 15px;">
                    <thead>
                        <tr>
                            <th>Table</th>
                            <th>Records</th>
                            <th>Size</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="db-table">
                        <tr><td colspan="4" class="loading">Loading...</td></tr>
                    </tbody>
                </table>
            </div>
            <div class="card" style="margin-top: 20px;">
                <h2>üìä Database Schema</h2>
                <table class="table">
                    <thead>
                        <tr>
                            <th>Table Name</th>
                            <th>Columns</th>
                        </tr>
                    </thead>
                    <tbody id="schema-table">
                        <tr><td colspan="2" class="loading">Loading...</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Console Tab -->
        <div id="console" class="tab-content">
            <div class="card">
                <h2>üñ•Ô∏è Real-time Console</h2>
                <button class="refresh-btn" onclick="refreshConsole()">üîÑ Refresh Logs</button>
                <button class="refresh-btn" onclick="clearConsole()" style="margin-left: 10px;">üóëÔ∏è Clear</button>
                <div class="console" id="console-output">
                    <div class="console-line log-info">üöÄ [05:51:35] P2A-Bot v2 Started</div>
                    <div class="console-line log-debug">üìä [05:51:36] Database initialized</div>
                    <div class="console-line log-info">‚úÖ [05:51:37] 23 commands registered</div>
                    <div class="console-line log-debug">üîó [05:51:38] Telegram webhook configured</div>
                    <div class="console-line log-info">üíö [05:51:39] System ready for messages</div>
                </div>
            </div>
        </div>
        
        <!-- Settings Tab -->
        <div id="settings" class="tab-content">
            <div class="card">
                <h2>‚öôÔ∏è Bot Configuration</h2>
                <table class="table">
                    <thead>
                        <tr>
                            <th>Setting</th>
                            <th>Value</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Bot Version</td>
                            <td>2.0.0</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td>Edition</td>
                            <td>TypeScript + Java GOAT</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td>Database</td>
                            <td>PostgreSQL + SQLite</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td>Auto-ban Threshold</td>
                            <td>3 warnings</td>
                            <td><button class="refresh-btn" style="padding: 5px 10px;">Edit</button></td>
                        </tr>
                        <tr>
                            <td>Antiflood Status</td>
                            <td><span class="badge badge-success">Enabled</span></td>
                            <td><button class="refresh-btn" style="padding: 5px 10px;">Toggle</button></td>
                        </tr>
                        <tr>
                            <td>Command Prefix</td>
                            <td>/</td>
                            <td><button class="refresh-btn" style="padding: 5px 10px;">Edit</button></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    
    <script>
        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            
            // Initialize charts if needed
            if (tabName === 'overview') initOverviewCharts();
            if (tabName === 'stats') initStatsCharts();
            if (tabName === 'database') loadDatabase();
        }
        
        function initOverviewCharts() {
            const ctx1 = document.getElementById('commandChart');
            if (ctx1 && !ctx1.chart) {
                ctx1.chart = new Chart(ctx1, {
                    type: 'bar',
                    data: {
                        labels: ['Help', 'Stats', 'Warn', 'Ban', 'Notes'],
                        datasets: [{
                            label: 'Command Usage',
                            data: [234, 189, 124, 45, 98],
                            backgroundColor: ['#667eea', '#764ba2', '#f093fb', '#4facfe', '#00f2fe']
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });
            }
        }
        
        function initStatsCharts() {
            const ctx1 = document.getElementById('dailyChart');
            if (ctx1 && !ctx1.chart) {
                ctx1.chart = new Chart(ctx1, {
                    type: 'line',
                    data: {
                        labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                        datasets: [{
                            label: 'Messages',
                            data: [120, 150, 170, 160, 200, 180, 190],
                            borderColor: '#667eea',
                            backgroundColor: 'rgba(102, 126, 234, 0.1)'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });
            }
        }
        
        function refreshDatabase() {
            const tbody = document.getElementById('db-table');
            tbody.innerHTML = `
                <tr>
                    <td>telegram_chats</td>
                    <td>42</td>
                    <td>8.2 KB</td>
                    <td><span class="badge badge-success">‚úì OK</span></td>
                </tr>
                <tr>
                    <td>bot_notes</td>
                    <td>156</td>
                    <td>24.5 KB</td>
                    <td><span class="badge badge-success">‚úì OK</span></td>
                </tr>
                <tr>
                    <td>bot_filters</td>
                    <td>28</td>
                    <td>4.3 KB</td>
                    <td><span class="badge badge-success">‚úì OK</span></td>
                </tr>
                <tr>
                    <td>bot_warnings</td>
                    <td>89</td>
                    <td>12.1 KB</td>
                    <td><span class="badge badge-success">‚úì OK</span></td>
                </tr>
                <tr>
                    <td>bot_stats</td>
                    <td>42</td>
                    <td>6.8 KB</td>
                    <td><span class="badge badge-success">‚úì OK</span></td>
                </tr>
            `;
        }
        
        function loadDatabase() {
            refreshDatabase();
            const schemaBody = document.getElementById('schema-table');
            schemaBody.innerHTML = `
                <tr>
                    <td>telegram_chats</td>
                    <td>chatId, title, type, description, memberCount, antiFloodEnabled, autoWelcomeEnabled, welcomeMessage, createdAt, updatedAt</td>
                </tr>
                <tr>
                    <td>bot_notes</td>
                    <td>id, chatId, noteKey, noteContent, createdAt, updatedAt</td>
                </tr>
                <tr>
                    <td>bot_filters</td>
                    <td>id, chatId, pattern, replacement, regex, createdAt, updatedAt</td>
                </tr>
                <tr>
                    <td>bot_warnings</td>
                    <td>id, chatId, userId, reason, warningCount, createdAt, updatedAt</td>
                </tr>
                <tr>
                    <td>bot_stats</td>
                    <td>id, chatId, totalMessages, usersWarned, usersKicked, usersBanned, notesSaved, createdAt, updatedAt</td>
                </tr>
            `;
        }
        
        function refreshConsole() {
            const output = document.getElementById('console-output');
            output.innerHTML += '<div class="console-line log-info">üîÑ [' + new Date().toLocaleTimeString() + '] Logs refreshed</div>';
            output.scrollTop = output.scrollHeight;
        }
        
        function clearConsole() {
            document.getElementById('console-output').innerHTML = '';
        }
        
        // Initialize on load
        document.addEventListener('DOMContentLoaded', function() {
            initOverviewCharts();
            updateStatus();
        });
        
        function updateStatus() {
            // Update status items
            document.getElementById('db-status').innerHTML = '<span class="badge badge-success">‚úì Connected</span>';
            document.getElementById('active-chats').textContent = '42';
        }
        
        setInterval(updateStatus, 5000);
    </script>
</body>
</html>
